{
  "version": 3,
  "sources": ["../../shared/src/index.ts", "../src/reactive.ts", "../src/effect.ts"],
  "sourcesContent": ["export const isObject = (value) => {\r\n    return value !== null && typeof value === 'object';\r\n};", "// 1\u3001\u5BF9\u8C61\u4EE3\u7406 => \u89E3\u51B3\u65B9\u6CD5proxy\r\n// 2\u3001\u591A\u6B21\u4EE3\u7406\r\n// - 1\u3001\u540C\u4E00\u4E2A\u5BF9\u8C61\u4EE3\u7406\u591A\u6B21 => \u89E3\u51B3\u529E\u6CD5: WeakMap\r\n// - 2\u3001\u4EE3\u7406\u8FC7\u540E\u5BF9\u8C61\u518D\u6B21\u4EE3\u7406 =>  \u89E3\u51B3\u529E\u6CD5: \u6DFB\u52A0\u6807\u8BC6Flag\r\nimport { isObject } from \"@vue/shared\";\r\n// \u6240\u6709\u6807\u8BC6\u679A\u4E3E\r\nexport const enum ReactiveFlags {\r\n    IS_REACTIVE = '__v_isReactive' // \u662F\u5426\u4EE3\u7406\u6807\u8BC6\r\n}\r\n\r\nconst proxyMap =  new WeakMap();\r\n\r\nexport function reactive (target) {\r\n    // \u56E0\u4E3Anew Proxy\u7684target\u53EA\u63A5\u6536\u5BF9\u8C61,reactive\u53EA\u5904\u7406\u5BF9\u8C61\u6570\u636E\u7C7B\u578B\r\n    if(!isObject(target)) return target;\r\n\r\n    // \u68C0\u67E5target\u662F\u5426\u4EE3\u7406\u8FC7\r\n    const existingProxy = proxyMap.get(target);\r\n    if(existingProxy) return existingProxy;\r\n    // \u68C0\u67E5target\u662F\u5426\u6709\u4EE3\u7406\u6807\u8BC6\r\n    if(target[ReactiveFlags.IS_REACTIVE]) return target;\r\n\r\n    // \u4F7F\u7528new Proxy\u4EE3\u7406\u5BF9\u8C61\r\n    const proxy = new Proxy(target, {\r\n        get(target, key, receiver) {\r\n            if(key === ReactiveFlags.IS_REACTIVE) return true;\r\n            return Reflect.get(target, key, receiver);\r\n        },\r\n        set(target, key, value, receiver) {\r\n            return Reflect.set(target, key, value, receiver)\r\n        }\r\n    })\r\n\r\n    // \u672A\u4EE3\u7406\u6DFB\u52A0\u4EE3\u7406\r\n    proxyMap.set(target, proxy);\r\n    return proxy;\r\n}", "// 1\u3001\u7528\u6237\u4F20\u9012\u4E00\u4E2A\u51FD\u6570,\u8FD9\u4E2A\u51FD\u6570\u7ACB\u5373\u6267\u884C\r\n// 2\u3001effect\u5177\u6709\u54CD\u5E94\u5F0F(ReactiveEffect),\u4F9D\u8D56\u5C5E\u6027\u53D8\u5316\u7ACB\u5373\u6267\u884C\r\n\r\nexport let activeEffect = undefined;\r\nexport class ReactiveEffect {\r\n    // \u9ED8\u8BA4\u628Afn\u6302\u8F7D\u5230\u7C7B\u7684\u5B9E\u4F8B\u4E0A\r\n    constructor(private fn){}\r\n    run(){\r\n        console.log('this\u4F5C\u7528\u57DF', this);\r\n        activeEffect = this;\r\n        return this.fn()\r\n    }\r\n}\r\nexport function effect (fn) {\r\n    const _effect = new ReactiveEffect(fn);\r\n    console.log('effect~~',_effect);\r\n    _effect.run();\r\n}"],
  "mappings": ";AAAO,IAAM,WAAW,CAAC,UAAU;AAC/B,SAAO,UAAU,QAAQ,OAAO,UAAU;AAC9C;;;ACIO,IAAW,gBAAX,kBAAWA,mBAAX;AACH,EAAAA,eAAA,iBAAc;AADA,SAAAA;AAAA,GAAA;AAIlB,IAAM,WAAY,oBAAI,QAAQ;AAEvB,SAAS,SAAU,QAAQ;AAE9B,MAAG,CAAC,SAAS,MAAM;AAAG,WAAO;AAG7B,QAAM,gBAAgB,SAAS,IAAI,MAAM;AACzC,MAAG;AAAe,WAAO;AAEzB,MAAG,OAAO;AAA4B,WAAO;AAG7C,QAAM,QAAQ,IAAI,MAAM,QAAQ;AAAA,IAC5B,IAAIC,SAAQ,KAAK,UAAU;AACvB,UAAG,QAAQ;AAA2B,eAAO;AAC7C,aAAO,QAAQ,IAAIA,SAAQ,KAAK,QAAQ;AAAA,IAC5C;AAAA,IACA,IAAIA,SAAQ,KAAK,OAAO,UAAU;AAC9B,aAAO,QAAQ,IAAIA,SAAQ,KAAK,OAAO,QAAQ;AAAA,IACnD;AAAA,EACJ,CAAC;AAGD,WAAS,IAAI,QAAQ,KAAK;AAC1B,SAAO;AACX;;;ACjCO,IAAI,eAAe;AACnB,IAAM,iBAAN,MAAqB;AAAA,EAExB,YAAoB,IAAG;AAAH;AAAA,EAAI;AAAA,EACxB,MAAK;AACD,YAAQ,IAAI,0BAAW,IAAI;AAC3B,mBAAe;AACf,WAAO,KAAK,GAAG;AAAA,EACnB;AACJ;AACO,SAAS,OAAQ,IAAI;AACxB,QAAM,UAAU,IAAI,eAAe,EAAE;AACrC,UAAQ,IAAI,YAAW,OAAO;AAC9B,UAAQ,IAAI;AAChB;",
  "names": ["ReactiveFlags", "target"]
}
